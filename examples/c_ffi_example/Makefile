CC = gcc
CFLAGS = -Wall -Wextra -I../../include
# Linking to the static library generated by cargo
LDFLAGS = -L../../target/debug -lmqtt_ffi -lpthread -ldl

all: mqtt_c_example

mqtt_c_example: main.c
	cargo build -p mqtt_ffi
	mkdir -p out
	$(CC) $(CFLAGS) main.c -o out/mqtt_c_example $(LDFLAGS)

clean:
	rm -rf out
